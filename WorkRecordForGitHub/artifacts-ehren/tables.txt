/*THESE SCRIPTS WERE GENERATED BY MYSQL WORKBENCH HENCE NO COMMENTS ON THE CODE
PLEASE NOTE THAT SOME OF THE MORE COMPLICATED TABLES AND FIELDS HAVE COMMENTS ASSOCIATED*/

CREATE TABLE `lease_doc` (
  `leaseDocId` int(11) NOT NULL AUTO_INCREMENT,
  `rent` int(11) NOT NULL COMMENT 'It should be $AUD/week',
  `startDate` date DEFAULT NULL,
  `period` int(11) DEFAULT NULL COMMENT 'Rental period in number of weeks.',
  `wHouseId` int(11) DEFAULT NULL,
  `roomId` int(11) DEFAULT NULL,
  `bondPaid` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`leaseDocId`),
  UNIQUE KEY `leaseDocId_UNIQUE` (`leaseDocId`),
  KEY `wHouseId_idx` (`wHouseId`),
  KEY `roomId_idx` (`roomId`),
  CONSTRAINT `leaseDoc-roomId` FOREIGN KEY (`roomId`) REFERENCES `room` (`roomId`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `leaseDoc-wHouseId` FOREIGN KEY (`wHouseId`) REFERENCES `w_house` (`wHouseId`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;


CREATE TABLE `login` (
  `loginId` int(11) NOT NULL AUTO_INCREMENT,
  `email` varchar(45) NOT NULL COMMENT 'Used as username',
  `password` varchar(45) NOT NULL,
  PRIMARY KEY (`loginId`),
  UNIQUE KEY `loginId_UNIQUE` (`loginId`),
  UNIQUE KEY `userName_UNIQUE` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=utf8;

CREATE TABLE `property` (
  `propertyId` int(11) NOT NULL AUTO_INCREMENT,
  `sHouseId` int(11) DEFAULT NULL,
  `wHouseId` int(11) DEFAULT NULL,
  `address` varchar(150) NOT NULL,
  `description` varchar(250) DEFAULT NULL,
  `ownerId` int(11) DEFAULT NULL,
  `suburb` varchar(75) NOT NULL,
  `state` varchar(45) NOT NULL,
  `postcode` int(11) NOT NULL,
  `numCarParks` int(11) NOT NULL,
  `numBath` int(11) NOT NULL,
  PRIMARY KEY (`propertyId`),
  UNIQUE KEY `propertyId_UNIQUE` (`propertyId`),
  UNIQUE KEY `address_UNIQUE` (`address`),
  KEY `property-sHouseId_idx` (`sHouseId`),
  KEY `property-wHouseId_idx` (`wHouseId`),
  KEY `property-ownerId_idx` (`ownerId`),
  CONSTRAINT `property-ownerId` FOREIGN KEY (`ownerId`) REFERENCES `owners` (`ownerId`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `property-sHouseId` FOREIGN KEY (`sHouseId`) REFERENCES `s_house` (`sHouseId`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `property-wHouseId` FOREIGN KEY (`wHouseId`) REFERENCES `w_house` (`wHouseId`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=67 DEFAULT CHARSET=utf8 COMMENT='can be either a sharehouse or a whole house. Used as a convergence point for the two types and their common properties.';

CREATE TABLE `property_pic` (
  `propertyPicId` int(11) NOT NULL AUTO_INCREMENT,
  `propertyId` int(11) NOT NULL,
  `image` longblob NOT NULL,
  `image_type` varchar(45) NOT NULL,
  PRIMARY KEY (`propertyPicId`),
  UNIQUE KEY `propertyPicId_UNIQUE` (`propertyPicId`),
  KEY `property_pic-propertyId_idx` (`propertyId`),
  CONSTRAINT `property_pic-propertyId` FOREIGN KEY (`propertyId`) REFERENCES `property` (`propertyId`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8;


CREATE TABLE `room_management` (
  `roomManagementId` int(11) NOT NULL AUTO_INCREMENT,
  `roomId` int(11) NOT NULL,
  `staffId` int(11) NOT NULL,
  PRIMARY KEY (`roomManagementId`),
  UNIQUE KEY `room_managementId_UNIQUE` (`roomManagementId`),
  KEY `roomManagement-roomId_idx` (`roomId`),
  KEY `roomManagement-staffId_idx` (`staffId`),
  CONSTRAINT `roomManagement-roomId` FOREIGN KEY (`roomId`) REFERENCES `room` (`roomId`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `roomManagement-staffId` FOREIGN KEY (`staffId`) REFERENCES `staff` (`staffId`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='records which rooms staff members can manage';

CREATE TABLE `staff` (
  `staffId` int(11) NOT NULL AUTO_INCREMENT,
  `firstName` varchar(45) NOT NULL,
  `lastName` varchar(45) DEFAULT NULL,
  `loginId` int(11) DEFAULT NULL,
  PRIMARY KEY (`staffId`),
  UNIQUE KEY `staffId_UNIQUE` (`staffId`),
  KEY `staff-loginId_idx` (`loginId`),
  CONSTRAINT `staff-loginId` FOREIGN KEY (`loginId`) REFERENCES `login` (`loginId`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `w_house` (
  `wHouseId` int(11) NOT NULL AUTO_INCREMENT,
  `numRooms` int(11) NOT NULL,
  `defaultRent` int(11) NOT NULL COMMENT 'weekly',
  `defaultPeriod` int(11) NOT NULL COMMENT 'The period the house will be rented for on the lease unless otherwise specified. Measured in weeks',
  `buyingPrice` int(15) NOT NULL,
  PRIMARY KEY (`wHouseId`),
  UNIQUE KEY `wHouseId_UNIQUE` (`wHouseId`)
) ENGINE=InnoDB AUTO_INCREMENT=58 DEFAULT CHARSET=utf8 COMMENT='whole house';
